const {
  mainWindow
} = require('./window.js');
const {
  onUnexpectedError
} = require('../common/errors.js');
function createTrustedTypesPolicy(policyName, policyOptions) {
  const monacoEnvironment = globalThis.MonacoEnvironment;
  if (monacoEnvironment?.createTrustedTypesPolicy) {
    try {
      return monacoEnvironment.createTrustedTypesPolicy(policyName, policyOptions);
    } catch (err) {
      onUnexpectedError(err);
      return undefined;
    }
  }
  try {
    return mainWindow.trustedTypes?.createPolicy(policyName, policyOptions);
  } catch (err) {
    onUnexpectedError(err);
    return undefined;
  }
}
exports.createTrustedTypesPolicy = createTrustedTypesPolicy;